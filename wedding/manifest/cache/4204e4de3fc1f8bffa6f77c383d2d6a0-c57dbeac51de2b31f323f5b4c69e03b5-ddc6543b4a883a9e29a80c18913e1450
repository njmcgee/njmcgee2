<pre><line id="1"><marker></marker><content><span class="context-markup xml xsl"><span class="declaration open close"><span class="begin">&lt;?xml</span> <span class="attribute">version=</span><span class="value">"1.0"</span> <span class="attribute">encoding=</span><span class="value">"utf-8"</span><span class="end">?&gt;</span></span><span class="text"></content></line></span></span>
<line id="2"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:stylesheet</span> <span class="attribute">version=</span><span class="value">"1.0"</span> <span class="attribute">xmlns:xsl=</span><span class="value">"http://www.w3.org/1999/XSL/Transform"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="3"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="4"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="comment"><span class="start">&lt;!--</span></content></line></span></span>
<line id="5"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="6"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">Description:</content></line></span></span>
<line id="7"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="8"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">This is a date formatting utility. The named template "format-date" takes 2 parameters:</content></line></span></span>
<line id="9"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="10"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">1. date - [required] takes an ISO date (2005-12-01)</content></line></span></span>
<line id="11"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">2. format - [optional] takes a format string.</content></line></span></span>
<line id="12"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="13"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">Format options:</content></line></span></span>
<line id="14"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="15"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">Y - year in 4 digits e.g. 1981, 1992, 2008</content></line></span></span>
<line id="16"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">y - year in 2 digits e.g. 81, 92, 08</content></line></span></span>
<line id="17"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">M - month as a full word e.g. January, March, September</content></line></span></span>
<line id="18"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">m - month in 3 letters e.g. Jan, Mar, Sep</content></line></span></span>
<line id="19"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">N - month in digits without leading zero</content></line></span></span>
<line id="20"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">n - month in digits with leading zero</content></line></span></span>
<line id="21"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">D - day with suffix and no leading zero e.g. 1st, 23rd</content></line></span></span>
<line id="22"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">d - day in digits with leading zero e.g. 01, 09, 12, 25</content></line></span></span>
<line id="23"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">x - day in digits with no leading zero e.g. 1, 9, 12, 25</content></line></span></span>
<line id="24"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">T - time in 24-hours e.g. 18:30</content></line></span></span>
<line id="25"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">t - time in 12-hours e.g. 6:30pm</content></line></span></span>
<line id="26"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">W - weekday as a full word e.g. Monday, Tuesday</content></line></span></span>
<line id="27"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">w - weekday in 3 letters e.g. Mon, Tue, Wed</content></line></span></span>
<line id="28"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="29"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">Examples:</content></line></span></span>
<line id="30"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="31"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">M       =&gt; January</content></line></span></span>
<line id="32"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">d M     =&gt; 21 September</content></line></span></span>
<line id="33"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">m D, y  =&gt; Sep 21st, 81</content></line></span></span>
<line id="34"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">n-d-y   =&gt; 09-21-81</content></line></span></span>
<line id="35"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">d/n/y   =&gt; 21/09/81</content></line></span></span>
<line id="36"><marker></marker><content><span class="context-markup xml xsl"><span class="comment">d/n/y t =&gt; 21/09/81 6:30pm</content></line></span></span>
<line id="37"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"></content></line></span></span>
<line id="38"><marker></marker><content><span class="context-markup xml xsl"><span class="comment"><span class="stop">--&gt;</span></span><span class="text"></content></line></span></span>
<line id="39"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="40"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-date"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="41"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="42"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'D M, Y'"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="43"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="44"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"string-length(<span class="xpath">$format</span>) <span class="entity">&amp;lt;</span>= 10"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="45"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"date-controller"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="46"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="47"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$format</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="48"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="49"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="50"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="51"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:text</span><span class="end">&gt;</span></span><span class="text">Error: format parameter is not correctly set. You have: </span><span class="tag close">&lt;/xsl:text&gt;</span><span class="text"></content></line></span></span>
<line id="52"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"string-length(<span class="xpath">$format</span>)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="53"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:text</span><span class="end">&gt;</span></span><span class="text">.</span><span class="tag close">&lt;/xsl:text&gt;</span><span class="text"></content></line></span></span>
<line id="54"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:otherwise&gt;</span><span class="text"></content></line></span></span>
<line id="55"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="56"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="57"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="58"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"date-controller"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="59"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="60"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="61"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"letter"</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$format</span>,1,1)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="62"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"tletter"</span> <span class="attribute">select=</span><span class="value">"translate(<span class="xpath">$letter</span>,'DMNYTW','dmnytw')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="63"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="64"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'y'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="65"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-year"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="66"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="67"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="68"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="69"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="70"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'm'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="71"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-month"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="72"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="73"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="74"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="75"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="76"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'n'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="77"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-month"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="78"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="79"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="80"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="81"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="82"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'd'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="83"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-day"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="84"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="85"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="86"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="87"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="88"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'x'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="89"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-day"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="90"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="91"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="92"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="93"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="94"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 't'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="95"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-time"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="96"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"time"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>/@time"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="97"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="98"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="99"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="100"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'w'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="101"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-weekday"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="102"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"weekday"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>/@weekday"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="103"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="104"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="105"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="106"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="107"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="108"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:otherwise&gt;</span><span class="text"></content></line></span></span>
<line id="109"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="110"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:if</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$letter</span> = not('')"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="111"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"date-controller"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="112"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="113"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$format</span>,2)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="114"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:call-template&gt;</span><span class="text"></content></line></span></span>
<line id="115"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:if&gt;</span><span class="text"></content></line></span></span>
<line id="116"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="117"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="118"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-year"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="119"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="120"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"year"</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$date</span>,1,4)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="121"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'y'"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="122"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="123"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'y'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="124"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$year</span>,3)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="125"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="126"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'Y'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="127"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$year</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="128"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="129"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="130"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="131"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="132"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-month"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="133"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="134"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"month"</span> <span class="attribute">select=</span><span class="value">"format-number(substring(<span class="xpath">$date</span>,6,2), '##')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="135"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'m'"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="136"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"month-word"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="137"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="138"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 01"</span><span class="end">&gt;</span></span><span class="text">January</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="139"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 02"</span><span class="end">&gt;</span></span><span class="text">February</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="140"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 03"</span><span class="end">&gt;</span></span><span class="text">March</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="141"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 04"</span><span class="end">&gt;</span></span><span class="text">April</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="142"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 05"</span><span class="end">&gt;</span></span><span class="text">May</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="143"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 06"</span><span class="end">&gt;</span></span><span class="text">June</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="144"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 07"</span><span class="end">&gt;</span></span><span class="text">July</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="145"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 08"</span><span class="end">&gt;</span></span><span class="text">August</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="146"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 09"</span><span class="end">&gt;</span></span><span class="text">September</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="147"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 10"</span><span class="end">&gt;</span></span><span class="text">October</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="148"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 11"</span><span class="end">&gt;</span></span><span class="text">November</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="149"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 12"</span><span class="end">&gt;</span></span><span class="text">December</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="150"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="151"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:param&gt;</span><span class="text"></content></line></span></span>
<line id="152"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="153"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'm'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="154"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$month-word</span>, 1,3)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="155"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="156"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'M'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="157"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$month-word</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="158"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="159"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'n'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="160"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$month</span>, '00')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="161"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="162"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'N'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="163"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$month</span>, '0')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="164"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="165"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="166"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="167"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="168"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-day"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="169"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="170"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"day"</span> <span class="attribute">select=</span><span class="value">"format-number(substring(<span class="xpath">$date</span>,9,2),'00')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="171"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'d'"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="172"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"suffix"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="173"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="174"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"(substring(<span class="xpath">$day</span>,2) = 1) and not(substring(<span class="xpath">$day</span>,1,1) = 1)"</span><span class="end">&gt;</span></span><span class="text">st</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="175"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"(substring(<span class="xpath">$day</span>,2) = 2) and not(substring(<span class="xpath">$day</span>,1,1) = 1)"</span><span class="end">&gt;</span></span><span class="text">nd</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="176"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"(substring(<span class="xpath">$day</span>,2) = 3) and not(substring(<span class="xpath">$day</span>,1,1) = 1)"</span><span class="end">&gt;</span></span><span class="text">rd</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="177"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span><span class="text">th</span><span class="tag close">&lt;/xsl:otherwise&gt;</span><span class="text"></content></line></span></span>
<line id="178"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="179"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:param&gt;</span><span class="text"></content></line></span></span>
<line id="180"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="181"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'd'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="182"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$day</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="183"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="184"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'x'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="185"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$day</span>,'0')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="186"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="187"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'D'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="188"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$day</span>,'0')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="189"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$suffix</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="190"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="191"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="192"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="193"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="194"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-time"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="195"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"time"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="196"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"hour"</span> <span class="attribute">select=</span><span class="value">"substring-before(<span class="xpath">$time</span>, ':')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="197"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"minute"</span> <span class="attribute">select=</span><span class="value">"substring-after(<span class="xpath">$time</span>, ':')"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="198"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'T'"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="199"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="200"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'T'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="201"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$time</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="202"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="203"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 't'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="204"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="205"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$hour</span> mod 12 = 0"</span><span class="end">&gt;</span></span><span class="text">12</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="206"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"(<span class="xpath">$hour</span> mod 12)"</span><span class="end">/&gt;</span></span><span class="tag close">&lt;/xsl:otherwise&gt;</span><span class="text"></content></line></span></span>
<line id="207"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="208"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"concat(':',<span class="xpath">$minute</span>)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="209"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="210"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$hour</span> <span class="entity">&amp;lt;</span> 12"</span><span class="end">&gt;</span></span><span class="text">am</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="211"><marker></marker><content><span class="context-markup xml xsl"><span class="text">                </span><span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span><span class="text">pm</span><span class="tag close">&lt;/xsl:otherwise&gt;</span><span class="text"></content></line></span></span>
<line id="212"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="213"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="214"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="215"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="216"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="217"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-weekday"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="218"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"weekday"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="219"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'w'"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="220"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"result"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="221"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="222"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 1"</span><span class="end">&gt;</span></span><span class="text">Monday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="223"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 2"</span><span class="end">&gt;</span></span><span class="text">Tuesday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="224"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 3"</span><span class="end">&gt;</span></span><span class="text">Wednesday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="225"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 4"</span><span class="end">&gt;</span></span><span class="text">Thursday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="226"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 5"</span><span class="end">&gt;</span></span><span class="text">Friday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="227"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 6"</span><span class="end">&gt;</span></span><span class="text">Saturday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="228"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 7"</span><span class="end">&gt;</span></span><span class="text">Sunday</span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="229"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="230"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:param&gt;</span><span class="text"></content></line></span></span>
<line id="231"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="232"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'W'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="233"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$result</span>"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="234"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="235"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'w'"</span><span class="end">&gt;</span></span><span class="text"></content></line></span></span>
<line id="236"><marker></marker><content><span class="context-markup xml xsl"><span class="text">            </span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$result</span>,1,3)"</span><span class="end">/&gt;</span></span><span class="text"></content></line></span></span>
<line id="237"><marker></marker><content><span class="context-markup xml xsl"><span class="text">        </span><span class="tag close">&lt;/xsl:when&gt;</span><span class="text"></content></line></span></span>
<line id="238"><marker></marker><content><span class="context-markup xml xsl"><span class="text">    </span><span class="tag close">&lt;/xsl:choose&gt;</span><span class="text"></content></line></span></span>
<line id="239"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:template&gt;</span><span class="text"></content></line></span></span>
<line id="240"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></content></line></span></span>
<line id="241"><marker></marker><content><span class="context-markup xml xsl"><span class="text"></span><span class="tag close">&lt;/xsl:stylesheet&gt;</span></span></content></line></pre>